---
wave: 1
depends_on: []
files_modified:
  - components/home/RotatingSIMCard.tsx
  - lib/hooks/useMediaQuery.ts
  - lib/hooks/useReducedMotion.ts
autonomous: true
---

# Plan 05-02: Optimize 3D Animations for Mobile

## Objective

Replace heavy 3D CSS transform animations with static or simplified versions on mobile devices to improve performance and respect user motion preferences.

## Context

`RotatingSIMCard.tsx` uses heavy CSS transforms (rotateY, perspective) that can cause performance issues on mobile devices. Success criteria requires 3D SIM card animation replaced with static image on mobile devices. Need to respect `prefers-reduced-motion` accessibility setting.

## Tasks

<task id="1" name="Create useMediaQuery hook">
Create `lib/hooks/useMediaQuery.ts`:
- Custom React hook for responsive breakpoints
- Returns boolean for mobile viewport (<768px)
- SSR-safe (return false during SSR, hydrate on client)
- Use useEffect + matchMedia API
- TypeScript typed
</task>

<task id="2" name="Create useReducedMotion hook">
Create `lib/hooks/useReducedMotion.ts`:
- Detect `prefers-reduced-motion` media query
- Return boolean: true if user prefers reduced motion
- SSR-safe implementation
- TypeScript typed
</task>

<task id="3" name="Update RotatingSIMCard component">
Modify `components/home/RotatingSIMCard.tsx`:
- Import useMediaQuery and useReducedMotion hooks
- Conditionally render based on viewport + motion preference
- Desktop + motion allowed: Full 3D animation
- Mobile OR reduced motion: Static image with subtle scale
- Use same SIM card image for consistency
- Preserve aspect ratio and sizing
</task>

<task id="4" name="Implement static mobile variant">
Create simplified mobile version:
- Remove CSS transform: rotateY, perspective
- Use simple scale animation (1.0 → 1.05) on hover
- Reduce animation duration (500ms → 300ms)
- Use will-change: transform for GPU acceleration
- Ensure image loads progressively
</task>

<task id="5" name="Performance optimization">
Optimize animation performance:
- Use CSS `transform` property (GPU-accelerated)
- Add `will-change: transform` hint
- Remove unnecessary re-renders
- Lazy load component if below fold
- Test on actual mobile devices (Chrome DevTools throttling)
</task>

<task id="6" name="Accessibility compliance">
Ensure accessibility:
- Respect `prefers-reduced-motion`
- Add alt text to static image
- Maintain focus indicators
- Test with screen readers
- WCAG 2.1 AA compliance
</task>

## Verification

**Manual Testing:**
- [ ] Desktop: Full 3D animation plays
- [ ] Mobile (<768px): Static or simplified animation
- [ ] Reduced motion: Static version on all devices
- [ ] No layout shift when switching modes
- [ ] Performance: 60fps on mobile (Chrome DevTools)
- [ ] Lighthouse mobile score improvement

**Code Quality:**
- [ ] Hooks are SSR-safe (no hydration mismatch)
- [ ] TypeScript types defined
- [ ] No console errors
- [ ] Component memoized if needed
- [ ] Proper cleanup in useEffect

## Must-Haves

1. **Static image on mobile**: Mobile devices (<768px) show simplified version
2. **Respect motion preferences**: `prefers-reduced-motion` disables 3D animation
3. **Performance improved**: 60fps on mobile devices
4. **No hydration errors**: SSR-safe implementation

## Dependencies

- RotatingSIMCard component (existing)
- React hooks (useState, useEffect, useRef)
- Tailwind CSS for responsive classes

## Success Metrics

- Lighthouse mobile performance score >85
- No jank (consistent 60fps)
- Reduced motion setting respected
- Mobile viewport uses static/simplified version
