---
wave: 3
depends_on: [05-01, 05-02, 05-03]
files_modified:
  - next.config.js
  - components/home/SinglePageHome.tsx
  - app/[locale]/layout.tsx
autonomous: false
checkpoint: performance_audit
---

# Plan 05-04: Mobile Performance Tuning & Verification

## Objective

Measure and optimize mobile performance to achieve Lighthouse mobile score with LCP <3s under 3G throttling conditions.

## Context

Success criteria requires Lighthouse mobile score showing LCP <3s with 3G throttling. Need to measure current performance, identify bottlenecks, and optimize. This is a verification checkpoint to confirm Phase 5 goals are met.

## Tasks

<task id="1" name="Baseline performance audit">
Measure current mobile performance:
- Run Lighthouse mobile audit (3G throttling)
- Record current LCP, FID, CLS metrics
- Identify render-blocking resources
- Check bundle size (should be <220KB)
- Test on actual mobile device if possible
- Document baseline scores
</task>

<task id="2" name="Image optimization">
Optimize images for mobile:
- Ensure next/image component used everywhere
- Configure responsive image sizes in next.config.js
- Add priority loading for above-fold images
- Lazy load below-fold images
- Convert to WebP format where possible
- Test image loading performance
</task>

<task id="3" name="Code splitting verification">
Verify dynamic imports:
- Confirm CartDrawer dynamically imported
- Confirm ProductCard lazy loaded
- Check bundle analyzer output
- Ensure no large synchronous imports
- Verify chunks load on demand
</task>

<task id="4" name="Font optimization">
Optimize font loading:
- Use next/font for Google Fonts
- Add font-display: swap
- Preload critical fonts
- Reduce number of font weights if possible
- Test font loading performance
</task>

<task id="5" name="Reduce main thread work">
Optimize JavaScript execution:
- Minimize re-renders with React.memo
- Use useCallback for event handlers
- Debounce scroll listeners
- Avoid large synchronous operations
- Profile with Chrome DevTools Performance
</task>

<task id="6" name="Network optimization">
Optimize network requests:
- Verify API responses cached
- Check service worker (if enabled)
- Minimize number of requests
- Compress responses (gzip/brotli)
- Test on slow 3G connection
</task>

## CHECKPOINT: Performance Audit

**Pause for human review after Task 1 completes.**

Present baseline Lighthouse scores to user:
- Current LCP, FID, CLS
- Performance score
- Accessibility score
- Bundle size

**Questions for user:**
1. Is current LCP acceptable, or should we optimize further?
2. Are there specific pages that feel slow on mobile?
3. Should we prioritize speed over features (e.g., disable animations)?

**If LCP >3s:** Continue with optimization tasks (2-6)
**If LCP <3s:** Skip to verification, phase complete

## Verification

**Lighthouse Mobile Audit:**
- [ ] Run with 3G throttling
- [ ] LCP <3 seconds
- [ ] Performance score >85
- [ ] Accessibility score >90
- [ ] No console errors

**Real Device Testing:**
- [ ] Test on actual Android device
- [ ] Test on actual iPhone
- [ ] Test on slow connection
- [ ] Verify animations smooth
- [ ] Check battery usage

**Bundle Size:**
- [ ] Total bundle <220KB
- [ ] Main chunk optimized
- [ ] Vendor chunks split correctly
- [ ] No duplicate dependencies

**Phase 5 Goals Met:**
- [ ] ✅ Sticky CTA visible on mobile (Plan 05-01)
- [ ] ✅ LCP <3s with 3G throttling (Plan 05-04)
- [ ] ✅ 3D animations optimized (Plan 05-02)
- [ ] ✅ Touch targets ≥44px (Plan 05-03)

## Must-Haves

1. **LCP <3s measured**: Lighthouse confirms LCP under 3 seconds
2. **Performance score >85**: Lighthouse mobile performance score acceptable
3. **All Phase 5 plans verified**: Sticky CTA, animations, touch targets working
4. **No performance regressions**: Core Web Vitals maintained

## Dependencies

- All Phase 5 plans complete (05-01, 05-02, 05-03)
- Lighthouse CLI or Chrome DevTools
- Mobile device for testing (or emulation)

## Success Metrics

- Lighthouse mobile LCP: <3 seconds (3G)
- Lighthouse Performance: >85
- Lighthouse Accessibility: >90
- Bundle size: <220KB
- 60fps animations on mobile
- All Phase 5 success criteria met
