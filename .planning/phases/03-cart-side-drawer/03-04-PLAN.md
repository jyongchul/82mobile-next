---
phase: 03-cart-side-drawer
plan: 04
type: execute
wave: 3
depends_on: ["03-02", "03-03"]
files_modified: []
autonomous: false

must_haves:
  truths:
    - "Drawer opens from right on desktop viewport"
    - "Drawer opens from bottom on mobile viewport"
    - "Cart items show with working quantity controls"
    - "Checkout view accessible from cart view"
    - "Cart persists after page refresh"
  artifacts: []
  key_links: []
---

<objective>
Verify Phase 3 Cart & Side Drawer implementation against success criteria.

Purpose: Ensure all Phase 3 features work correctly before moving to Phase 4 Checkout.
Output: Verification results confirming drawer functionality across devices.
</objective>

<execution_context>
@/home/charles_lee/.claude/get-shit-done/workflows/execute-plan.md
@/home/charles_lee/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/ROADMAP.md
@.planning/STATE.md

# Prior plan summaries
@.planning/phases/03-cart-side-drawer/03-01-SUMMARY.md
@.planning/phases/03-cart-side-drawer/03-02-SUMMARY.md
@.planning/phases/03-cart-side-drawer/03-03-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Build and deploy to Vercel</name>
  <files></files>
  <action>
1. Run full build to verify no compilation errors:
   ```bash
   cd /mnt/c/82Mobile/82mobile-next && npm run build
   ```

2. Check for any TypeScript errors or warnings

3. If build succeeds, commit changes:
   ```bash
   git add .
   git commit -m "feat(cart): add cart side drawer with checkout transition

   - CartDrawer component with responsive animations
   - CartDrawerItems with compact layout
   - UI store for drawer state management
   - Checkout view transition within drawer
   - Auto-open drawer on add-to-cart
   - Header cart icon triggers drawer"
   ```

4. Push to trigger Vercel deployment:
   ```bash
   git push origin master
   ```

5. Wait for deployment (check Vercel dashboard or git push output)
  </action>
  <verify>
- npm run build exits with code 0
- Git commit created
- Push succeeds
- Vercel deployment URL accessible
  </verify>
  <done>
Changes deployed to Vercel production for live testing.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Cart side drawer with the following features:
- Opens from right on desktop, bottom on mobile
- Shows cart items with quantity controls (+/-)
- Remove item button (trash icon)
- Order summary with subtotal, VAT, total
- "Proceed to Checkout" button transitions to checkout form
- Back arrow in checkout view returns to cart
- Auto-opens when product added to cart
  </what-built>
  <how-to-verify>
**Production URL:** https://82mobile-next.vercel.app

**Desktop Testing (Chrome/Firefox):**
1. Click cart icon in header
   - [ ] Drawer slides in from RIGHT side
   - [ ] Backdrop dims the page
   - [ ] Click backdrop closes drawer

2. Add a product (if cart empty):
   - Navigate to products section
   - Hover on product card, click "Add to Cart"
   - [ ] Toast notification appears
   - [ ] Cart drawer opens automatically
   - [ ] Item appears in drawer

3. Test quantity controls:
   - [ ] Click + button increases quantity
   - [ ] Click - button decreases quantity
   - [ ] Quantity shows updated value

4. Test remove:
   - [ ] Click trash icon removes item
   - [ ] Item animates out smoothly

5. Test checkout transition:
   - [ ] Click "Proceed to Checkout" button
   - [ ] View transitions to checkout form
   - [ ] Back arrow appears in header
   - [ ] Click back arrow returns to cart view

6. Test persistence:
   - Add item to cart, close drawer
   - [ ] Refresh page (F5)
   - [ ] Click cart icon
   - [ ] Item still in cart

7. Test close:
   - [ ] X button closes drawer
   - [ ] Escape key closes drawer
   - [ ] Clicking backdrop closes drawer

**Mobile Testing (Chrome DevTools or real device):**
1. Open DevTools → Toggle device toolbar (Ctrl+Shift+M)
2. Select "iPhone 14" or similar mobile preset
3. Refresh page
4. Click cart icon
   - [ ] Drawer slides up from BOTTOM
   - [ ] Rounded top corners visible
   - [ ] Height is ~80% of viewport

5. Repeat quantity and checkout tests on mobile
  </how-to-verify>
  <resume-signal>
Type "approved" if all checks pass, or list specific issues found.
  </resume-signal>
</task>

</tasks>

<verification>
Phase 3 Success Criteria from ROADMAP.md:
1. ✓/✗ Drawer Opens: Cart icon click opens drawer from right (desktop) or bottom (mobile)
2. ✓/✗ Cart Persists: Add item → refresh page → item still in cart
3. ✓/✗ Management Works: +/- quantity and remove item buttons update cart immediately
4. ✓/✗ Checkout Transition: "Proceed to Checkout" button transitions drawer to checkout view
</verification>

<success_criteria>
All ROADMAP success criteria verified:
- Desktop drawer slides from right
- Mobile drawer slides from bottom
- Cart data persists in localStorage
- Quantity controls work immediately
- Remove button animates item out
- Checkout transition works
- Back button returns to cart
</success_criteria>

<output>
After completion, create `.planning/phases/03-cart-side-drawer/03-04-SUMMARY.md`

Also update `.planning/STATE.md`:
- Set Phase 3 status to "Complete"
- Update plans complete count
- Note any issues found during verification
</output>
